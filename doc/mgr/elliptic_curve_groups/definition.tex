\section{Definicja}

\noindent
Zdefiniujemy teraz działanie grupowe na zbiorze punktów krzywej eliptycznej.

\begin{definition}\label{ec_groupop_def}
Dana jest krzywa eliptyczna $E$.
\emph{Grupa na krzywej eliptycznej $E$}
to grupa składająca się
ze zbioru punktów krzywej $E$
oraz działania, oznaczanego symbolem $+$,
określonego w następujący sposób.
\begin{enumerate}
\item\label{ec_groupop_neutral}
Elementem neutralnym działania jest punkt $\ecident$.
\begin{equation}
P + \ecident = \ecident = \ecident + P
\end{equation}
\item\label{ec_groupop_inverse}
Elementem przeciwnym do punktu $P \neq \ecident$,
oznaczanym symbolem $-P$,
jest punkt $\overline{P}$.
\begin{equation}
P + \overline{P} = \ecident = \overline{P} + P
\end{equation}
\item\label{ec_groupop_add_generic}
Suma dwóch punktów skończonych $P$ i $Q$
postaci $P = (a, b)$ i $Q = (c, d)$,
przy czym $Q \neq \overline{P}$,
to punkt $R$ postaci $R = (e, f)$,
którego współrzędne są określone następującymi wzorami:
\begin{eqnarray}
\label{ec_groupop_add_generic_eqn_x}
e & = & \lambda^2 - a - c \\
\label{ec_groupop_add_generic_eqn_y}
f & = & -\lambda(e - a) - b
\end{eqnarray}
Współczynnik $\lambda$ jest określony następująco:
\begin{enumerate}
\item\label{ec_groupop_add_generic_chord}
jeżeli $a \neq c$, to:
\begin{equation}\label{ec_groupop_add_generic_lambda_chord_eqn}
\lambda = \frac{d-b}{c-a}
\end{equation}
\item\label{ec_groupop_add_generic_tangent}
jeżeli $a = c$, to:
\begin{equation}\label{ec_groupop_add_generic_lambda_tangent_eqn}
\lambda = \frac{3a^2+A}{2b}
\end{equation}
\end{enumerate}
\end{enumerate}
\end{definition}

\begin{remark}
Nie wprowadzamy nowego oznaczenia na grupę na krzywej eliptycznej --
będziemy ją oznaczać tak samo, jak oznaczamy krzywe.
\end{remark}

\begin{remark}
W podanej definicji w punkcie \ref{ec_groupop_add_generic}.
suma dwóch punktów $P$ i $Q$
nie jest określona, gdy $Q = \overline{P}$
lub gdy jeden z punktów jest nieskończony.
Wynik dodawania jest wówczas określony
na podstawie zależności podanych w punkcie
\ref{ec_groupop_neutral}. lub \ref{ec_groupop_inverse}.
\end{remark}

\begin{remark}
Przypadek opisany w punkcie \ref{ec_groupop_add_generic_tangent}.
zachodzi wtedy,
gdy próbujemy dodać punkt skończony niebędący punktem rzędu dwa
do samego siebie.
\end{remark}

\begin{fact}
Jeżeli punkty $P$, $Q$ i $R$ leżą na jednej linii,
to $P + Q + R = \ecident$.
\end{fact}

\noindent
Fakt ten daje intuicję, na czym tak naprawdę polega działanie
na punktach krzywej eliptycznej.
Aby dodać punkty $P$ i $Q$, przeprowadzamy przez nie linię,
odnajdujemy trzeci punkt $R$,
w którym przecina się ona z krzywą,
po czym za wynik dodawania uznajemy punkt $\overline{R}$.
Podobieństwo do działania w zerowej grupie Picarda nie jest przypadkowe.

\begin{theorem}
Dana jest krzywa eliptyczna $E$.
Niech $\pi$
będzie bijekcją określoną wzorem
\ref{piczero_bijection_eqn}.
Wówczas dla dowolnych punktów $P$ i $Q$ na krzywej $E$
zachodzą następujące zależności:
\begin{itemize}
\item $\pi(P + Q) = \pi(P) + \pi(Q)$;
\item
$\pi^{-1}\left(
[\divi{P} - \divi{\ecident}]
+
[\divi{Q} - \divi{\ecident}]\right
)
=
\pi^{-1}([\divi{P} - \divi{\ecident}])
+
\pi^{-1}([\divi{Q} - \divi{\ecident}])$.
\end{itemize}
\end{theorem}

\begin{proof}
Natychmiastowy na podstawie
twierdzeń
\ref{divisor_linear_reduction_theorem},
\ref{zerodeg_divisor_linear_reduction_theorem}
i \ref{piczero_curvepts_bijection_theorem},
wniosku \ref{piczero_representants_coro}
oraz faktu \ref{piczero_addition_fact}.
\end{proof}

\begin{corollary}
Zbiór punktów na krzywej eliptycznej $E$
wraz z operacją dodawania punktów
tworzą grupę.
Jest to grupa abelowa izomorficzna z grupą $\Pic^0(E)$.
\end{corollary}

\noindent
Udało się nam uniknąć sprawdzania praw grupowych
bezpośrednio z podanej definicji (co byłoby dosyć żmudne),
a przy tym zrozumieliśmy powód,
dla którego działanie na krzywej eliptycznej jest zdefiniowane
właśnie w taki sposób.
Jest to o tyle cenne,
że w literaturze fachowej, lecz niekoniecznie matematycznej,
działanie grupowe na krzywej eliptycznej
często definiuje się po prostu poprzez podanie odpowiednich wzorów,
bez wskazania motywacji.
